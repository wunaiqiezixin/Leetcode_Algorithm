# P0870:æ•°å­—ä¸‰è§’å½¢
[é¢˜ç›®é“¾æ¥](http://cxsjsxmooc.openjudge.cn/dspythonbookqh2/P0870/)

- ğŸš€ åŠ¨æ€è§„åˆ’ï¼šç”¨ç©ºé—´æ¢æ—¶é—´
---
### è‡ªé¡¶å‘ä¸‹---é€’å½’è§£å†³
>ç”¨äºŒç»´æ•°ç»„Då­˜å‚¨æ•°å­—ä¸‰è§’å½¢çš„å€¼
```C
int D[101][101];
```
>å®šä¹‰å‡½æ•°MaxSum(int row, int j);
```C
int MaxSum(int row, int j);
//è¿”å›ä»ç¬¬rowè¡Œçš„ç¬¬jä¸ªæ•°åˆ°æœ€åº•éƒ¨çš„æœ€å¤§å€¼
```
- é€’å½’
```C
int MaxSum(int row, int j)//è¿”å›ç¬¬rowè¡Œåˆ°åº•è¾¹çš„æœ€å¤§å’Œ
{
	if (row == N) //å·²åœ¨æœ€åº•éƒ¨ï¼Œç›´æ¥è¿”å›
		return D[row][j];
  //å…¶æ­£ä¸‹æ–¹çš„ç‚¹åˆ°åº•è¾¹çš„æœ€å¤§å€¼
	int x = MaxSum(row + 1, j);
  //å…¶æ­£ä¸‹æ–¹å³è¾¹çš„ç‚¹åˆ°åº•è¾¹çš„æœ€å¤§å€¼
	int y = MaxSum(row + 1, j + 1);
	return max(x, y) + D[row][j];
}
```
>å‡½æ•°æ²¡æœ‰é”™
>ä½†æ˜¯æ—¶é—´å¤æ‚åº¦æ˜¯ $2^{n}$ $2^{100}$  å°±ç®—æ˜¯å®‡å®™æ¯ç­äº†ä¹Ÿç®—ä¸å‡ºæ¥å‘€
>
>å› ä¸ºæ¶‰åŠäº†å¤§é‡çš„é‡å¤è®¡ç®—
>
>é‚£æ€ä¹ˆåŠå‘¢
>
>æˆ‘ä»¬è¦é¿å…é‡å¤è®¡ç®—
>
>æˆ‘ä»¬ç®—å‡ºä¸€ä¸ªå€¼ä¹‹åå°±æŠŠå®ƒè®°ä¸‹æ¥ï¼Œä»¥åè¦ç”¨å°±æ‹¿å‡ºæ¥å°±è¡Œäº†
```C
int max_sum[101][101];
//ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„è®°å½•æ¯ä¸ªç‚¹åˆ°åº•éƒ¨çš„æœ€å¤§å’Œ
//æˆ‘ä»¬æŠŠæ•°ç»„çš„å€¼åˆå§‹åŒ–ä¸º-1ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦å·²ç»è®¡ç®—è¿‡äº†
```
- ğŸ“ä¼˜åŒ–åçš„MaxSum()å‡½æ•°
```C
int MaxSum(int row, int j)//è¿”å›ç¬¬rowè¡Œåˆ°åº•è¾¹çš„æœ€å¤§å’Œ
{
	if (max_sum[row][j] != -1)//è‹¥å·²ç»æœ‰è®°å½•ï¼Œåˆ™ç›´æ¥æ‹¿å‡ºæ¥ç”¨ï¼Œä¸ç”¨å†è®¡ç®—
		return max_sum[row][j];
	if (row == N)//è‹¥ç‚¹åˆšå¥½åœ¨åº•éƒ¨ï¼Œåˆ™ç›´æ¥å°†å…¶å€¼è®°å½•è¿›æ•°ç»„
		max_sum[row][j] = D[row][j];
	else
		max_sum[row][j] = max(MaxSum(row + 1, j), MaxSum(row + 1, j + 1))
		+ D[row][j];
	return max_sum[row][j];
}
```
>æˆ‘ä»¬åªè¦ç®—å‡ºæ‰€æœ‰ç‚¹åˆ°åº•éƒ¨çš„æœ€å¤§å€¼å°±è¡Œäº†ï¼Œäºæ˜¯æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$
>
>å› ä¸ºç‚¹çš„ä¸ªæ•°æ˜¯ $\frac{n(n+1)}{2}$
### é€’å½’å®Œæ•´ä»£ç 
### ***C:***
```C
#define _CRT_SECURE_NO_WARNINGS
#include<stdio.h>
#define max(a,b) ((a) > (b) ? (a) : (b))
D[101][101];//ç¬¬rowè¡Œç¬¬jä¸ªæ•°çš„å€¼
max_sum[101][101];//ç¬¬rowè¡Œç¬¬jä¸ªæ•°åˆ°åº•è¾¹çš„æœ€å¤§å€¼
int N;//æ€»çš„è¡Œæ•°
int MaxSum(int row, int j)//è¿”å›ç¬¬rowè¡Œåˆ°åº•è¾¹çš„æœ€å¤§å’Œ
{
	if (max_sum[row][j] != -1)
		return max_sum[row][j];
	if (row == N)
		max_sum[row][j] = D[row][j];
	else
		max_sum[row][j] = max(MaxSum(row + 1, j), MaxSum(row + 1, j + 1))
		+ D[row][j];
	return max_sum[row][j];
}

int main(void)
{
	scanf("%d", &N);
	int i, j;
	for (i = 0; i < N; i++)
	{
		for (j = 0; j <= i; j++)
		{
      //è¯»å…¥æ¯ä¸ªç‚¹çš„å€¼
			scanf("%d", &D[i][j]);
      //å°†è®°å¿†æ•°ç»„çš„å€¼åˆå§‹åŒ–ä¸º-1
			max_sum[i][j] = -1;
		}
	}
	printf("%d", MaxSum(0, 0));
}
```
