# 1047. 删除字符串中的所有相邻重复项
[力扣题目链接](https://leetcode.cn/problems/remove-all-adjacent-duplicates-in-string/description/)

---
### 方法一：使用栈
###### 用数组实现栈
```C
//用数组实现一个栈
char* removeDuplicates(char* s) {
    int len = strlen(s);
    //为栈分配空间
    char* stack = (char*)malloc(sizeof(char) * len + 1);
    int stackTop = 0;//指向栈顶
    //遍历字符串
    int i;
    for (i = 0; i < len; i++)
    {
        //如果栈不为空，且该字符与栈顶相同，则弹出栈顶元素
        if (stackTop > 0 && s[i] == stack[stackTop - 1])
            stackTop--;
        else //否则入栈
            stack[stackTop++] = s[i];
    }
    //在末尾加空字符
    stack[stackTop] = '\0';
    //将栈作为字符串返回
    return stack;
}
```
###### 用链表实现栈
```C
//用链表实现一个栈
typedef struct node {
    char ch;
    struct node* next;
} node;
//栈
typedef struct {
    node* top;
} stack;

//栈的初始化
stack* initStack()
{
    stack* stk = (stack*)malloc(sizeof(stack));
    stk->top = (node*)malloc(sizeof(node));
    stk->top->next = NULL;
    return stk;
}
//入栈
void push(stack* stk, char ch)
{
    //新建一个节点
    node* new = (node*)malloc(sizeof(node));
    new->ch = ch;
    new->next = stk->top->next;
    stk->top->next = new;
}
//出栈
void pop(stack* stk)
{
    node* cur = stk->top->next;
    stk->top->next = cur->next;
    free(cur);
}
//返回栈顶元素
char peek(stack* stk)
{
    return stk->top->next->ch;
}
//栈是否为空
bool isEmpty(stack* stk)
{
    return stk->top->next == NULL;
}

char* removeDuplicates(char* s) {
    //初始化一个栈
    stack* stk = initStack();
    //遍历字符串
    int i;
    for (i = 0; i < strlen(s); i++)
    {
        if (isEmpty(stk) || peek(stk) != s[i])
            push(stk, s[i]);
        else
            pop(stk);
    }
    i = 0;
    //用一个数组存结果
    char* ans = (char*)malloc(sizeof(char) * strlen(s) + 1);
    if (isEmpty(stk))
    {
        ans[i] = '\0';
        return ans;
    }
    node* p = stk->top->next;
    while (p)
    {
        ans[i++] = p->ch;
        p = p->next;
    }
    ans[i] = '\0';
    //反转字符串
    int left = 0, right = strlen(ans) - 1;
    while (left < right)
    {
        char tmp = ans[left];
        ans[left++] = ans[right];
        ans[right--] = tmp;
    }
    return ans;
}
```
